@page "/usuarios/login"
@rendermode InteractiveServer
@inject FrontendTCC.Services.UsuarioService UsuarioService
@using FrontendTCC.Models
<link href="css/login.css" rel="stylesheet" />
<div class="login-container">
    <div class="login-panel">

        <h2 class="titulo-login">Login</h2>
@if (!string.IsNullOrEmpty(mensagem))
{
    <div class="alert alert-sucesse">@mensagem</div>
}
else if(!string.IsNullOrEmpty(mensagemErro))
{
    <div class="alert alert-danger">@mensagemErro</div>
}

<EditForm Model="@usuario" OnValidSubmit="@AutenticarUsuario" FormName="usuario">
            <DataAnnotationsValidator />
            <ValidationSummary />

            <div class="mb-3">
                <label>Usuário:</label>
                <InputText @bind-Value="usuario.Username" class="form-control input-login" />
            </div>

            <div class="mb-3">
                <label>Senha:</label>
                <InputText type="password" @bind-Value="usuario.PasswordString" class="form-control input-login" />
            </div>

            <button type="submit" class="btn btn-login">
                Entrar
            </button>

            <a href="usuarios/registrar" class="btn-link registrar-link">
                Não tem conta? Registrar
            </a>
        </EditForm>

    </div>
</div>

@code
{
    private UsuarioViewModel usuario = new();
    private string mensagem = string.Empty;
    private string mensagemErro = string.Empty;
}
